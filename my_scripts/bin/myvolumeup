#! /bin/sh

# amixer set Master 2%+,2%+
# amixer -D pulse set Master 2%+,2%+
#ALSA_VOLUME=$(amixer get Master | grep 'Front Left: Playback' | grep -o '...%' | sed 's/\[//' | sed 's/%//' | sed 's/ //')
#ALSA_VOLUME=$(amixer get Master | grep 'Mono: Playback' | grep -o '...%' | sed 's/\[//' | sed 's/%//' | sed 's/ //')

ALSA_VOLUME=`pactl list sinks | grep '^[[:space:]]Volume:' | \
    head -n $(( $SINK + 1 )) | tail -n 1 | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,'`
if [ "$ALSA_VOLUME" -lt 100 ]; then
    pactl set-sink-volume 0 +2%
    ALSA_VOLUME=`pactl list sinks | grep '^[[:space:]]Volume:' | \
        head -n $(( $SINK + 1 )) | tail -n 1 | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,'`
else
    pactl set-sink-volume 0 100%
    ALSA_VOLUME="100"
fi
echo "V$ALSA_VOLUME" > $PANEL_FIFO &