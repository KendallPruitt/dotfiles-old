#! /bin/sh

# PANEL_FIFO="$HOME/.config/bspwm/panfifo"
# VOLUME_FIFO="$HOME/.config/volumefifo"

# for i in "$@"; do
#     case $i in
#         -u*|--up*)
#             # amixer -D pulse set Master 2%+,2%+
#             adjustment="2%+,2%+"
#             shift # past argument=value
#             ;;
#         -d*|--down*)
#             # amixer -D pulse set Master 2%-,2%-
#             adjustment="2%-,2%-"
#             shift # past argument=value
#             ;;
#         -m*|--togglemute*)
#             adjustment="toggle"
#             LIBPATH="${i#*=}"
#             shift # past argument=value
#             ;;
#         --default)
#             DEFAULT=YES
#             shift # past argument with no value
#             ;;
#         *)
#                 # unknown option
#             ;;
#     esac
# done
# "A$adjustment" > $VOLUME_FIFO &
# amixer -D pulse set Master toggle
if [ "$HOSTNAME" == "desktopArch" ]; then
    pactl set-sink-mute 1 toggle
    ALSA_VOLUME=$(amixer get Master | grep 'Front Left: Playback' | grep -o '...%' | sed 's/\[//' | sed 's/%//' | sed 's/ //')
else
    pactl set-sink-mute 0 toggle
    ALSA_VOLUME=`pactl list sinks | grep '^[[:space:]]Volume:' | \
        head -n $(( $SINK + 1 )) | tail -n 1 | sed -e 's,.* \([0-9][0-9]*\)%.*,\1,'`
fi
echo "V$ALSA_VOLUME" > $PANEL_FIFO &